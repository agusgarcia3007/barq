version: "3.8"

services:
  barq-db:
    image: agusgarcia3007/barq:latest
    container_name: barq-engine
    restart: unless-stopped

    # Puerto TCP del servidor SQL
    ports:
      - "8080:8080"

    # Persistencia de datos
    volumes:
      - barq_data:/var/lib/barq

    # Ajustes para Glommio/io_uring
    ulimits:
      memlock:
        soft: -1
        hard: -1
      nofile:
        soft: 65535
        hard: 65535

    cap_add:
      - IPC_LOCK
      - SYS_NICE

    environment:
      - RUST_LOG=info

volumes:
  barq_data:
